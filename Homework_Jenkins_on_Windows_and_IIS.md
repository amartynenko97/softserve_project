#### *Build and Deploy small project from GitHub using Jenkins, MSSQL, IIS on Windows Server VM*
___
+ *Установка гипервизора `Virtual Box`*

+ *Поднятие виртуальной машины на базе образа `WindowsServer2019`.*

+ *Настройка сети для ВМ и переадресации портов(`RDP` и `IIS`).*

![](/media/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202022-03-03%20113617.png)

![](/media/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202022-02-26%20222917.png)

![](/media/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202022-02-26%20222433.png)

+ *Установка IIS на ВМ*

![](/media/photo_2022-02-21_14-22-09.jpg)

![](/media/photo_2022-02-25_14-55-52.jpg)

+ *Установить SQL Server. Настроить возможность подключения через `SQL` и `Windows`. Настроить работу через сеть для возможности подключения через 1433 порт.*

***Решение ошибки логина***
![](/media/photo_2022-02-27_17-23-06.jpg)

![](/media/photo_2022-02-27_20-04-18.jpg)

![](/media/3.jpg)

+ *Установить  SDK для .net 6(ASP.NET Core).*


+ *Установить дополнения для IIS касающиеся `.NET`(Через включение фич добавить все пункты в IIS связанные с .NET). Можно через командную строку одной командой включить вообще все фичи для IIS c целью избавления от не5обходимости выставления галочек.*

![](/media/Для%20того%20чтобы%20показать%20что%20подключенно%20к%20IIS.png)

![](/media/%D0%94%D0%BB%D1%8F%20%D1%82%D0%BE%D0%B3%D0%BE%20%D1%87%D1%82%D0%BE%D0%B1%D1%8B%20%D0%BF%D1%80%D0%B8%D1%81%D0%BE%D0%B9%D0%B4%D0%B5%D0%BD%D0%B8%D1%82%D1%8C%20%D0%B2%D1%81%D0%B5%20%D1%87%D1%82%D0%BE%20%D1%81%D0%B2%D1%8F%D0%B7%D0%B0%D0%BD%D0%BE%20%D1%81%20IIS.png)

 + *Стянуть код приложения c https://github.com/dotnet-architecture/eShopOnWeb. Выполнить создание баз данных с помощью SDK как описано на GitHub в описании. Создать юзеров(логины) в SQL Server для работы с базами, для каждой базы отдельный юзер. Ознакомиться с командами для тестирование и сборки проекта и протестировать их работу.*

![](/media/1.jpg)

![](/media/2.jpg)

![](/media/%D0%9F%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D1%83%D0%B5%D0%BC%20%D1%81%D0%B0%D0%B9%D1%82%20%D1%81%20%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%20IIS%20(1).png)

![](/media/%D0%9F%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D1%83%D0%B5%D0%BC%20%D1%81%D0%B0%D0%B9%D1%82%20%D1%81%20%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D1%8C%D1%8E%20IIS%20(2).png)

![](/media/Решение%20херни%20с%20в%20файликах%20c%20настройками%20для%20%20подключения%20к%20базе%20SQL%20(1).png)
*Настройка логгов для работы апликухи* 

![](/media/%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0%20%D0%BB%D0%BE%D0%B3%D0%B3%D0%BE%D0%B2%20%D0%B4%D0%BB%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D1%8B%20%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F%20.png)

*Файлик `appsettings.json` для логина юзеров в базы*


![](/media/Решение%20херни%20с%20в%20файликах%20c%20настройками%20для%20%20подключения%20к%20базе%20SQL%20(3).png)

+ *Установить `Java 8` или `11`. Установить `Jenkins`. Создать джобу для тестирования и сборки проекта на базе соответствующих команд из пункта №4. Джоба должна содержать, как минимум, 3 логических блока: тестирование, сборка-публикация, архивация артефактов*

![](/media/4.jpg)

![](/media/5.jpg)

*`Jenkinsfile` для `build`*

![](/media/%D0%9F%D0%B0%D0%B9%D0%BF%D0%BB%D0%B0%D0%B9%D0%BD%20Jenkins%20%D0%B4%D0%BB%D1%8F%20%D0%91%D0%B8%D0%BB%D0%B4%D0%B0.png)


*`Jenkinsfile` для `deploy`*

![](/media/%D0%9F%D0%B0%D0%B9%D0%BF%D0%BB%D0%B0%D0%B9%D0%BD%20Jenkins%20%D0%B4%D0%BB%D1%8F%20%D0%94%D0%B5%D0%BF%D0%BB%D0%BE%D0%B9.png)

*Пайплайн отработал*

![](/media/7.jpg)

![](/media/8.jpg)